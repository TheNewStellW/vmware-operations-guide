---
title: "5. 分配模型"
date: 2021-06-14T10:57:22+10:00
draft: false
weight: 50
---

默认情况下，分配模型是 ***不*** 启用的，因为过量使用率因客户而异。您应该适当地配置它以考虑与该集群相关的所有类型的需求。通过使用两者，您可以考虑两种输入（真实需求和非真实需求）。

分配的下一个用例是演示文稿和报告。通常有一些限制，例如合同义务或 SLA，要求容量不超过商定的比率。请注意，这些限制通常是非技术性的。

一些客户喜欢根据过度使用来计划购买。确定适当的过度使用率，这是用于预测未来利用率的一个因素。过度使用率旨在提供对利用率的粗略估计。例如，4:1 的 CPU 过量使用率意味着平均每个 vCPU 只会以 25% 的利用率运行。

分配模型有 3 个主要限制：

#### 虚拟机大小

过量使用比率中不考虑 VM 大小。它假设调度两个巨大的虚拟机就像调度许多小型虚拟机一样简单。与几个大型虚拟机相比，ESXi 调度程序可以处理更多的小型虚拟机，尤其是当它们在不同时间达到峰值时。

#### 过度配置的虚拟机

过度配置 VM 的问题很常见，尤其是在大型 VM 中。在生产环境中很难解决这个问题，因为它涉及停机时间，你有责任证明它不会影响性能。从政治上讲，这可能会使确定 VM 大小并证明成本合理的团队看起来很糟糕。最好的方法是首先通过使用累进定价来预防问题。这在本书的 [定价](/operations-management/chapter-5-cost-management/1.5.2-price/) 部分进行了描述。

#### IaaS 工作负载

不考虑不采用 VM 形式的 IaaS 工作负载。 VMkernel、vSAN、NSX、vSphere Replication 和 vMotion 都需要考虑。另一方面，包含代理虚拟机是因为它采用虚拟机的形式，尽管它倾向于使用本地数据存储。