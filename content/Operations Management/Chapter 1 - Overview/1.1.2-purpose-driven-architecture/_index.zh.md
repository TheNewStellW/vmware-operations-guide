---
title: "2. 目的驱动架构"
date: 2021-06-11T11:31:22+10:00
draft: false
---

当您构建 IaaS 或桌面即服务时 ([DaaS](https://www.vmware.com/topics/glossary/content/desktop-as-a-service)), 你的目标是什么？ 我不是指设计方面的考虑，例如可用性和性能最佳实践。我的意思是你的架构必须交付的 **业务结果**，从为架构付费的人来看。

从逻辑上讲，答案取决于销售的产品。从广义上讲，您可以出售应用程序或基础设施。

对于应用程序，下表显示了各种服务。

![常见的“即服务”产品](1.1.2-fig-1.png?width=60pc&classes=shadow,border)

在 DaaS 的情况下，目标是确保最终用户获得高质量的桌面体验，同时保持每个用户的低价格。我们将对此进行更多讨论 [这里](/miscellaneous/chapter-8-vdi-daas/).

让我们深入了解 IaaS 业务。 IaaS 有三种变体。每个销售不同的项目，所以目标不可能相同。

| 服务 | 你在卖什么| 例子 |
| --- | --- | --- |
| IaaS | 2个变种:<br />**虚拟机**: VMware 企业客户中最常见的服务。 大多数服务都是“免费”提供的，很少或没有报销.<br />**资源**: 计算或存储资源块，例如 100 GHz CPU 和 100 GB RAM.| AWS EC2 是企业外最受欢迎的.|
| HWaaS | 硬件即服务.<br />这不是 IaaS，因为客户购买了整个物理 ESXi 主机并拥有自己的 vCenter Server。| VMC.|

<!-- ![IaaS and HWaaS comparison table](1.1.2-fig-2.png?width=60pc&classes=shadow,border) -->

![比较 VM、资源池和集群的表](1.1.2-fig-3.png?classes=shadow,border)

IaaS 最流行的变体是虚拟机即服务。在此变体中，业务目标是确保应用程序和 VM (VM) 运行 **且经济高效。**

![VM 即服务的许多方面](1.1.2-fig-4.png?width=50pc&classes=shadow,border)

成本部分很容易量化。你知道你在硬件、软件、服务和薪水上的花费。 **运行良好** 中的“井”是困难的部分，因为存在很大的未知数。

我们以 IaaS 为例。假设您正在为 2 个数据中心的 10,000 台虚拟机进行架构设计。你想象一下，第一个月有 2000 台虚拟机，上半年有 5000 台虚拟机，第一年最后是 10,000 台。您是否了解这10,000台虚拟机中每台虚拟机的基本信息，以便您可以构建基础架构为它们提供良好的服务？

- 他们几岁？它们的 vCPU、RAM 和磁盘配置是什么？
- 他们有多激烈？ CPU 利用率、RAM 利用率、磁盘 IOPS、网络吞吐量？
- 他们的工作量模式是什么？每日、每周、每月、无模式等。

答案显然是否定的。甚至应用程序团队也不知道，因为某些应用程序可能尚未开发。他们的供应商可能也不知道，因为用法尚不清楚。

SDDC 将为所有 10,000 台虚拟机提供良好服务的承诺类似于您设计的高速公路将为所有汽车、公共汽车和摩托车提供良好服务的承诺，我们无法预测将使用多少虚拟机以及使用多少虚拟机他们将使用它的频率的虚拟机。 我们将在 [Performance](/operations-management/chapter-2-performance-management/) 部分详细介绍这一点。

那么我们如何保证您的 IaaS 将为您的客户提供良好的服务？

我们可以使用性价比。您与客户分享的原则是所有服务行业都使用的常识：

> 你想要便宜；它不会很快。你想快点；它不会便宜。

这是您将 [服务等级](/operations-management/chapter-1-overview/1.1.7-service-level-agreement/#class-of-service) 与 [服务水平协议](/operations-management/chapter-1-overview/1.1.7-service-level-agreement) 一起. 最高级别的服务可提供最佳的正常运行时间和性能，但也是有代价的。 所有这些属性在 SLA 中都有很好的定义，没有任何歧义。合同不受解释。您预先定义所有关键指标，向您的客户保证您有信心按承诺交付。

然后，您可以构建 IaaS 来提供上述服务类别。服务水平成为您的业务产品。有了这个，你就可以开始思考结局了。